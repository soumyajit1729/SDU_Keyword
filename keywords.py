import pke
import tensorflow as tf
import tensorflow_hub as hub
import random
from transformers import (
  TokenClassificationPipeline,
  AutoModelForTokenClassification,
  AutoTokenizer,
)
from transformers.pipelines import AggregationStrategy
import numpy as np

from keybert import KeyBERT

def cosine_similarity_calc(vec_1,vec_2):

  sim = np.dot(vec_1,vec_2)/(np.linalg.norm(vec_1)*np.linalg.norm(vec_2))
  #print(sim)
  return sim

def remove_similar_words(list1,model):
  #print ("module %s loaded" % module_url)
  def embed(input):
    return model(input)
  message_embeddings = embed(list1)
  #print(list1,message_embeddings)
  fin_list = []
  c_list = [0 for i in range(len(list1))]
  for i in range(len(list1)):
    if(c_list[i]==0):
      fin_list.append(list1[i])
      for j in range(i+1,len(list1)):
        if(cosine_similarity_calc(message_embeddings[i],message_embeddings[j])>0.5):
          #print(message_embeddings[i],message_embeddings[j],cosine_similarity_calc(message_embeddings[i],message_embeddings[j]))

          list1[j]=1
  fin_list = [i for i in fin_list if i != 1]
  return fin_list

def get_words(txt):
  ns= set()
  res = txt.split()
  for x in res:
    ns.add(x.lower().strip(",? :/."))
  return ns

def generate_N_grams(text,ngram=1):
  words=[word for word in text.split(" ")]
  temp=zip(*[words[i:] for i in range(0,ngram)])
  ans=[' '.join(ngram) for ngram in temp]
  ans1 = set()
  for x in ans:
    ans1.add(x.strip(",? :/."))
  return ans1

from transformers import (
  TokenClassificationPipeline,
  AutoModelForTokenClassification,
  AutoTokenizer,
)
from transformers.pipelines import AggregationStrategy
import numpy as np

def kbir_model(text):


  # Define keyphrase extraction pipeline
  class KeyphraseExtractionPipeline(TokenClassificationPipeline):
      def __init__(self, model, *args, **kwargs):
          super().__init__(
              model=AutoModelForTokenClassification.from_pretrained(model),
              tokenizer=AutoTokenizer.from_pretrained(model),
              *args,
              **kwargs
          )

      def postprocess(self, all_outputs):
          results = super().postprocess(
              all_outputs=all_outputs,
              aggregation_strategy=AggregationStrategy.SIMPLE,
          )
          return np.unique([result.get("word").strip() for result in results])
  # Load pipeline
  model_name = "ml6team/keyphrase-extraction-kbir-inspec"
  extractor2 = KeyphraseExtractionPipeline(model=model_name)

  ans = extractor2(text)
  return ans

ms = ['honduras', 'the bahamas', 'wpx energy', 'anguilla', 'belle isle cress', 'lynx', 'alpha natural resources', 'thousand seal', 'common ragwort', 'manta ray', 'swift', 'cuckoo', 'buckeye', 'hanesbrands', 'jabil circuit', 'michaels cos.', 'best buy', 'harris', 'python', 'california black oak', 'parsley', 'carlyle group', 'dover', 'scale', 'flowers foods', 'national oilwell varco', 'tenneco', 'brookdale senior living', 'latvia', 'level 3 communications', 'mahogany birch', 'norway', 'skunk weed', 'spanish oak', 'express scripts holding', 'saint helena, ascension, and tristan da cunha', 'monster beverage', 'mastodon', 'western refining', 'hay fever weed', 'clean water and sanitation', 'sandisk', 'granite construction', 'trapdoor spider', 'trout', 'ingredion', 'rockwell automation', 'magellan health', 'pear', 'black ash', 'love vine', 'valmont industries', 'white alder', 'bb&t corp.', 'queens gilli flower', 'roundworm', 'mountain goat', 'united arab emirates', 'stifel financial', 'saskatoon', 'shad blow serviceberry', 'netherlands', 'graphic packaging holding', 'covance', 'magpie', 'ostrich', 'dormouse', 'united states steel', 'puerto rico', 'spirit aerosystems holdings', 'clorox', 'black alder', 'oceaneering international', 'indian paintbrush', 'berry plastics group', 'nbty', 'affordable and clean energy', 'holly', 'anglerfish', 'vampire bat', 'synopsys', 'triumph group', 'thermo fisher scientific', 'strawberry tree', 'soldiers woundwort', 'zulu', 'unified grocers', 'brilliant coneflower', 'goodding willow', 'sealed air', 'avon products', 'goodyear tire & rubber', 'saber-toothed cat', 'teco energy', 'trinet group', 'discover financial services', 'murphy usa', 'owens-illinois', 'wild onion', 'magellan midstream partners', 'old republic international', 'iasis healthcare', 'golden garlic', 'aardwolf', 'quintiles transnational holdings', 'service corp. international', 'stryker', 'hawaiian holdings', 'argentina', 'decent work and economic growth', 'common daisy', 'silkmoth', 'rite aid', 'regions financial', 'norfolk island', 'intel', 'bedbug', 'univision communications', 'herring', 'voya financial', 'angelfish', 'striped alder', 'condor', 'pepsico', 'directv', 'equatorial guinea', 'healthsouth', 'hasbro', 'blue jay', 'ground sloth', 'meadowlark', 'brown eyed susan', 'dollar general', 'chubb', 'catshark', 'nettle', 'blunt leaved milkweed', 'christmas island', 'common fig', 'snake berry', 'kindred healthcare', 'creeping thistle', 'yahoo', 'ecolab', 'peregrine falcon', 'toucan', 'nucor', 'apache', 'j.c. penney', 'guadeloupe', 'strawberry', 'common serviceberry', 'society finch', 'ep energy', 'c.h. robinson worldwide', 'water ash', 'koala', 'sinhala', "moody's", 'r.r. donnelley & sons', 'fannie mae', 'reindeer', 'valero energy', 'korean', 'hummingbird', 'international paper', 'orca', 'kellogg', 'western redbud', 'electronic arts', 'general mills', 'champion oak', 'sanderson farms', 'commercial metals', 'baobab', 'mead johnson nutrition', 'solomon islands', 'milky tassel', 'panthera hybrid', 'california walnut', 'african elephant', 'spice birch', 'brown-forman', 'prairie rose', 'malaysia', 'patterson', 'skywest', 'ecuador', 'river maple', 'delek us holdings', 'intuitive surgical', 'benin', 'energy future holdings', 'rum cherry', 'mettler-toledo international', 'sprouts farmers market', 'ambrosia', 'genesco', 'world fuel services', 'indian poke', 'delta tucker holdings', 'butterfly weed', 'burkina faso', 'harman international industries', 'fastenal', 'domtar', 'panera bread', 'dragon', 'swallow wort', 'white root', 'swamp dogwood', 'black cap', 'gamestop', 'polecat weed', 'goat', 'windstream holdings', 'cursed thistle', 'wall speedwell', 'spain', 'pnc financial services group', 'exelon', 'zimmer biomet holdings', 'white mulberry', 'helmerich & payne', 'humpback whale', 'swan', 'tajikistan', 'quokka', 'sycamore american', 'abbvie', 'bittersweet', 'broadridge financial solutions', 'lamprey', 'bolean birch', 'amc networks', 'pudina', 'white mans foot', 'federated states of micronesia', 'pale corydalis', 'monitor lizard', 'sm energy', 'winter rocket', 'wallis and futuna', 'colwort', 'west bank', 'sweet potato', 'great ragweed', 'carlisle', 'pep boys-manny, moe & jack', 'tempur sealy international', 'black eyed susan', 'yellow field cress', 'l brands', 'puma', 'ferret', 'centurylink', 'aol', 'morocco', 'muskox', 'vf', 'crows toes', 'black widow spider', 'gray alder', 'trimble navigation', 'corn speedwell', 'sand brier', 'global payments', 'cameron international', 'red birch', 'anaconda', 'swamp dewberry', 'fair maid of france', 'csx', 'raven', 'tjx', 'trinity industries', 'pea', 'ross stores', 'malawi', 'marten', 'pitney bowes', 'bindweed', 'viola species', 'telugu', 'white trillium', 'congo (kinshasa)', 'red brush', 'stanley black & decker', 'scansource', 'ptarmigan', 'croatia', 'orange coneflower', 'eagle', 'ppg industries', 'snail', 'orange', 'toro', 'mango', 'equinix', 'superior energy services', 'cme group', 'momentive performance materials', 'plantain', 'lockheed martin', 'gap', 'hounds berry', 'eastman chemical', 'celanese', 'moth', 'pellitory', 'myanmar', 'western & southern financial group', 'greece', 'chhattisgarhi', 'stork', 'wild carrot', 'corn thistle', 'petroleum', "lowe's", 'wgl holdings', 'maize', 'northern trust', 'lincoln national', 'white tansy', 'amharic', 'epic2010', 'greenbrier cos.', 'dinosaur', 'coach', 'poor annie', 'kirby', 'team health holdings', 'dogwood', 'japanese flowering dogwood', 'bear corn', 'khmer', 'allergan', 'mccormick', 'thor industries', 'birds nest', 'ibm', 'alder', 'beetle', 'swedish', 'hairy bittercress', 'carolina horse nettle', 'abbott laboratories', 'trailing bittersweet', 'haldi', 'cheetah', 'conocophillips', 'mammal', 'hilton worldwide holdings', 'donaldson', 'tribune media', 'penny hedge', 'sole', 'sungard data systems', 'coyote willow', 'river ash', 'sociality', 'spectra energy', 'vampire squid', 'avnet', 'assurant', 'brunei', 'west', 'willow', 'starwood hotels & resorts', 'wild black cherry', 'rocket cress', 'pineapple', 'red river maple', 'meerkat', 'felonwort', 'snow leopard', 'nike', 'nauru', 'fossil group', 'calpine', 'commscope holding', 'arrow wood', 'land snail', 'anticipation', 'bird', 'poland', 'epic2014', 'xpo logistics', 'rodent', 'sierra leone', 'parker-hannifin', 'swamp milkweed', 'common alder', 'ventas', 'southwest airlines', 'black weed', 'gila monster', 'stammerwort', 'malagasy', 'tarsier', 'yellow bark oak', 'american nightshade', 'anixter international', 'moose maple', 'rosemary', 'lvb acquisition', 'hcc insurance holdings', 'catalina ironwood', 'worm', 'finch', 'coast polypody', 'coffee plant', 'itch weed', 'ferns', 'eastern black oak', 'agco', 'hawk', 'piranha', 'tall ambrosia', 'bristly dewberry', 'lavender', 'molson coors brewing', 'marsh & mclennan', 'giant squid', 'mother of the evening', 'corydalis', 'corning', 'jarden', 'hausa', 'linkedin', 'mulberry', 'gewa bangladesh', 'stag bush', 'false box', 'emc', 'mink', 'botswana', 'ringneck dove', 'winter gilli flower', 'ilocano', 'christmas fern', 'kiwi', 'arabic', 'leek', 'egret', 'mastec', 'tatar', 'quanta services', 'forest laboratories', 'tesla motors', 'american winterberry', 'arrow crab', 'whole foods market', 'poor mans mustard', 'red ink plant', 'nepal', 'poke', 'plexus', 'fruit bat', 'almond', 'fm global', 'systemax', 'andorra', 'hermit crab', 'grapefruit', 'hawaiian electric industries', 'on semiconductor', 'ulta salon cosmetics & fragrance', 'lizard', 'kudzu', 'liberia', 'hookworm', 'intl fcstone', 'yellow corydalis', 'walmart', 'junglefowl', 'great blue heron', 'gutweed', 'porpoise', 'symetra financial', 'owens corning', 'dyers oak', 'antigua and barbuda', 'water birch', 'ryland group', 'algeria', 'namibia', 'general cable', 'clover', 'resilience', 'niger', 'land cress', 'hcp', 'igbo', 'turkish', 'nisource', 'community health systems', 'big lots', 'blackhaw viburnum', 'aardvark', 'woolly yarrow', 'insight enterprises', 'hologic', "brink's", 'meritor', 'gecko', 'kimberly queen fern', 'mosquito', 'oracle', 'leucadia national', 'inkberry holly', 'right whale', 'pheasant', 'india', 'fancy rat varieties', 'united technologies', 'great plains energy', 'orange milkweed', "casey's general stores", 'french guiana', 'juneberry', 'loon', 'anthem', 'paper birch', 'brunswick', 'pinnacle entertainment', 'arctic fox', 'boise cascade', 'principal financial', 'advanced micro devices', 'applied materials', 'bon-ton stores', 'ak steel holding', 'guardian life ins. co. of america', 'wolverine', 'baker hughes', 'pricesmart', 'bald eagle', 'amerco', 'malay', 'tobacco plant', 'meadow holly', 'pike', 'jackal', 'scarlet berry', 'scrambled eggs', 'realogy holdings', 'krill', 'usg', 'quail', 'tassel weed', 'hares colwort', 'gerbil', 'joy global', 'ermine', 'winterberry', 'thousand leaf', 'state street corp.', 'caribou', 'falcon', 'zhuang', 'woodbine', 'gender equality', 'cardinal health', 'caci international', 'hormel foods', 'express', 'pokeroot', 'crestwood equity partners', 'costa rica', 'wild tansy', 'hyatt hotels', 'field sow thistle', 'lifepoint health', 'blue bindweed', 'apricot', 'moose', 'diplomat pharmacy', 'cutleaf toothwort', 'darden restaurants', 'intuit', 'american national insurance', 'southern', 'coral', 'duscle', 'rat', 'speckled alder', 'denbury resources', 'diebold', 'cricket', 'tern', 'macaw', 'prawn', 'kla-tencor', 'silver maple', 'african violet', 'juniper networks', 'crows nest', 'reptile', 'yellow daisy', 'adams resources & energy', 'epic2008', 'wildcat', 'h&r block', 'bitter weed', 'north korea', 'bass', 'newell rubbermaid', 'tahr', 'rpc', 'romania', 'foot locker', 'hillshire brands', 'swordfish', 'indian arrow wood', 'lace flower', 'indonesian', 'netapp', 'aig', 'redwood sorrel', 'roman wormwood', 'pg&e corp.', 'kuwait', '3m', 'consolidated edison', 'finance', 'columbia sportswear', 'poison berry', 'milfoil', "bloomin' brands", 'skechers u.s.a.', 'white ash', 'new world quail', 'algerian oak quercus', 'horse nettle', 'potato', 'morel', 'spoonbill', 'first american financial', 'serviceberry', 'american electric power', "carter's", 'france', 'cisco systems', 'trailing nightshade', 'cit group', 'ciena', 'virginia silk weed', 'charter communications', 'bay laurel', 'onemain holdings', 'downy serviceberry', 'oil states international', 'tamil', 'sycamore arizona', 'silver ragwort', 'masco', 'cms energy', 'juniper', 'onion', 'purple flowered toothwort', 'targa energy', 'warner music group', 'blackberry', 'hubbell', 'greif', 'triple-s management', 'sweet rocket', 'darling ingredients', 'qatar', 'common tansy', 'msc industrial direct', 'mckesson', 'wild orange', 'dooryard plantain', 'united kingdom', 'thimbleberry', 'green thistle', 'booz allen hamilton holding', 'rambler rose', 'nicaragua', 'northern red oak', 'skyworks solutions', 'amerisourcebergen', 'tulsi', 'g-iii apparel group', 'corn sow thistle', 'smelt', 'early winter cress', 'borgwarner', 'poplar', 'garget', 'eog resources', 'tall coneflower', 'cst brands', 'mosquito plant', 'common onion', 'whooping crane', 'florida dogwood', 'european white birch', 'bug', 'ncr', 'giant onion', 'pacific life', 'madagascar', 'peafowl', 'analog devices', 'abercrombie & fitch', 'neiman marcus group', 'osage orange', 'exide technologies', 'canary', 'taking care of business', 'bahrain', 'equity residential', 'yarrow', 'zero hunger', 'crayfish', 'perkinelmer', 'weasel', 'staples', 'farsi', 'alliant energy', 'cuba', 'fish', 'sturgeon', 'visteon', 'dominica', 'waste management', 'amazon.com', 'termite', 'olive', 'purple raspberry', 'constellation brands', 'pvh', 'rainbow trout', 'mwi veterinary supply', 'virginia winterberry', 'zedoary', 'benchmark electronics', 'silky swallow wort', 'garlic mustard', 'torchmark', 'bhutan', 'wind root', 'thrivent financial for lutherans', 'newmarket', 'loews', 'ethiopia', 'tomato', 'alliance data systems', 'hospitality', 'amphibian', 'indonesia', 'thyme', 'georgia', 'outerwall', 'affiliated managers group', 'awadhi', 'european pellitory', 'slovakia', 'indian posy', 'johnson controls', 'toys "r" us', 'mockingbird', 'select medical holdings', 'huntington ingalls industries', 'comcast', 'dromedary camel', 'dwarf wild rose', 'pultegroup', 'automobile', 'under armour', 'guinea-bissau', 'us foods', 'belgium', 'narwhal', 'synnex', 'uruguay', 'fellenwort', 'hedgehog', 'hrg group', 'guinea', 'responsible consumption and production', 'arris group', 'tower international', 'being heard', 'cutleaf coneflower', 'violet bloom', 'belarus', 'dollar tree', 'tuna', 'core-mark holding', 'nightshade', 'queen annes lace', 'tasmanian devil', 'southwestern energy', 'morgan stanley', 'calumet specialty products partners', 'alleghany', 'honeywell international', 'wayside plantain', 'blue oak', 'crawdad', 'epic2011', 'albemarle', 'singapore', 'betula lenta', 'avaya', 'palau', 'cobra', 'bamboo', "o'reilly automotive", 'inkberry', 'bee', 'vicuna', 'duck', 'bank of new york mellon corp.', 'wasp', 'touch me not', 'kennametal', 'tuber root', 'grouse', 'senegal', 'halibut', 'beech', 'road weed', 'nii holdings', 'wyndham worldwide', 'trailing violet nightshade', 'antelope', 'kansas city southern', 'boa', 'dove', 'mauritius', 'gartner', 'agency', 'pepper root', 'sugarplum', 'cf industries holdings', 'xerinae', 'metaldyne performance group', 'leidos holdings', 'dish network', 'sea lion', 'silver birch', 'vietnam', 'rose willow', 'devils darning needle', 'nodding onion', 'live nation entertainment', 'blackrock', 'polaris industries', 'octopus', 'squid', 'seahorse', 'madura', 'ryerson holding', 'belk', 'dentsply sirona', 'sloth', 'silgan holdings', 'sweet potato vine', 'harsco', 'grenada', 'procter & gamble', 'ground berry', 'twenty-first century fox', 'yellow harlequin', 'being seen', 'life on land', 'cabo verde', 'bhojpuri', 'suriname', 'vishay intertechnology', 'clownfish', 'cucumber', 'hsn', 'walnut california walnut', 'a-mark precious metals', 'barracuda', 'cyprus', 'education management', 'shrew', 'asian rice', 'markwest energy partners', 'firstenergy', 'peabody energy', 'gnc holdings', 'tortoise', 'tutor perini', 'puffin', 'cancer jalap', 'ribwort', 'perennial thistle', 'energy transfer equity', 'uyghur', 'peace, justice, and strong institutions', 'spx', 'cerner', 'cabinet cherry', 'mattel', 'silky dogwood', 'information technology', 'grapevine', 'erie insurance group', 'arthur j. gallagher', 'golden buttons', 'old dominion freight line', 'ocelot', 'creek maple', 'epic2007', 'czechia', 'lansing trade group', 'pine', 'arfaj', 'j.b. hunt transport services', 'business', 'peru', 'mollusk', 'x-ray fish', 'antero resources', 'neem', 'crowfoot', 'serbia', 'activision blizzard', 'micron technology', 'colgate-palmolive', 'congo (brazzaville)', 'cress', 'huckleberry', 'opossum', 'microsoft', 'afghanistan', 'new zealand', 'global partners', 'pin oak', "dick's sporting goods", 'yemen', 'eel', 'paychex', 'malta', 'emu', 'garden nightshade', 'wildfowl', 'sally beauty holdings', 'kazakhstan', 'western trillium', 'seaboard', 'blue bird', 'american airlines group', 'jetblue airways', 'blackstone group', 'saint barthelemy', 'olin', 'boar', 'pinniped', 'slug', 'raccoon', 'cinemark holdings', 'ameren', 'servicemaster global holdings', 'heartland payment systems', 'red oak', 'sao tome and principe', 'cabot oil & gas', 'mossycup white oak', 'bank cress', 'penn national gaming', 'sea snail', 'silver fox', 'gray birch', 'mirbecks oak', 'puget energy', 'mongoose', 'prickly thistle', 'energen', 'sabre', 'tulip', 'air products & chemicals', 'carefusion', 'd.r. horton', 'nordstrom', 'sneezeweed', 'violet', 'parrot', 'archer daniels midland', 'spiny sow thistle', 'hollyfrontier', 'japan', 'guess', 'cuna mutual group', 'b/e aerospace', 'skunk', 'baby rose', 'unum group', 'zoetis', "aaron's", 'kyrgyzstan', 'salesforce.com', 'mauritania', 'mcgraw hill financial', 'chittagonian', 'aruba', 'fmc', 'hong kong', 'milkweed', 'sanguinary', 'alligator', 'thailand', 'colombia', 'sawfish', 'tarantula', 'houseleek', 'epic2017', 'hemp', 'autozone', 'scurvy cress', 'pilot whale', 'silverfish', 'enterprise products partners', 'frog', 'birds nest plant', 'polkweed', 'rook', 'comoros', 'rockwell collins', 'denmark', 'hammerhead shark', 'possumhaw', 'healthcare', 'yellow wood', 'hess', 'oaktree capital group', 'golden corydalis', 'l-3 communications', 'bay', 'european white hellebore', 'dana holding', 'tupperware brands', 'sint maarten', 'black panther', 'plane european sycamore', 'walnut', 'drumstick', 'harrier', 'constrictor', 'huntington bancshares', 'davita healthcare partners', 'slovenia', 'franklin resources', 'intercontinental exchange', 'elk', 'sperm whale', 'saint lucia', 'sri lanka', 'fifth third bancorp', 'crown castle international', 'bulgaria', 'party city holdings', 'epic2016', 'pbf energy', 'hispid swamp blackberry', 'tunisia', 'building bridges', 'tea', 'wallaby', 'tiaa-cref', 'old world quail', 'california buckeye', 'primate', 'flamingo', 'kosovo', 'c.r. bard', 'orbital atk', 'manufacturing', 'american cress', 'mandrill', 'pakistan', 'american tire distributors holdings', 'running swamp blackberry', 'blueberry', 'marmoset', 'expeditors international of washington', 'freeport-mcmoran', 'dcp midstream partners', 'seventy seven energy', 'tyrannosaurus', 'bemis', 'kazakh', 'flowserve', 'rye', 'horse cane', 'swamp oak', 'media', 'pioneer natural resources', 'chipmunk', 'pigeon berry', 'thimbleweed', 'ryder system', 'chameleon', 'mongolia', 'bittercress', 'hospira', 'enable midstream partners', 'ocwen financial', 'qep resources', 'clean harbors', 'starfish', 'legg mason', 'rhinoceros', 'hemp dogbane', 'marathon oil', 'winter cress', 'banana', 'azerbaijan', 'faroe islands', 'luxembourg', 'anadarko petroleum', 'ball', 'spool wood', 'epic2018', 'zebra', 'epic2013', 'jaguar', 'oge energy', 'rhubarb', 'brittle bush', 'aes', 'western digital', 'discovery communications', 'garlic root', 'yellow rocket', 'travelcenters of america', "cabela's", 'echostar', 'hungarian', 'fluxroot', 'mali', 'eritrea', 'deadnettle', 'bear', 'yellow birch', 'american white hellebore', 'verizon', 'china', 'pig', 'penn mutual life insurance', 'saint vincent and the grenadines', 'westrock', 'rooster', 'asbury automotive group', 'libya', 'sigma-aldrich', 'hartford financial services group', 'green ash', 'mole', 'coyote', 'ireland', 'genesis energy', 'nu skin enterprises', 'ashland', 'publix super markets', 'northern mariana islands', 'blue whale', 'petsmart', 'hogweed', 'dewberry', 'hornet', 'whiting petroleum', 'nepali', 'cod', 'wynn resorts', 'wild cotton', 'vulture', 'cognizant technology solutions', 'vwr', 'sharp fringed sow thistle', 'true cinnamon', 'cincinnati financial', 'universal american', 'squaw bush', 'flyingfish', 'pony', 'exxon mobil', 'assamese', 'epic2019', 'tick', 'kkr', 'bison', 'the gambia', 'kimberly-clark', 'symantec', 'aptargroup', 'swamp holly', 'united natural foods', 'boxelder', 'czech', 'e*trade financial', 'sauce alone', 'whirlpool', 'scotts miracle-gro', 'fowl', 'haryanvi', 'salamander', 'maldives', 'roadrunner', 'allison transmission holdings', 'earwig', 'bwx technologies', 'jordan', 'tiffany', 'quelea', 'mondelez international', 'nationstar mortgage holdings', 'smart & final stores', 'brown betty', 'galliform', 'gamefowl', 'rapeseed', 'montserrat', 'fly', 'mosaic', 'taiwan', 'facebook', 'squirrel', 'goldman sachs group', 'rose', 'apple', 'ally financial', 'wildebeest', 'lemon', 'mrc global', 'pelican', 'pinnacle west capital', 'marathon petroleum', 'renewal', 'qualcomm', 'arch coal', 'target', 'lkq', 'arabian leopard', 'dung beetle', 'gibbon', 'enersys', 'armenia', 'elephant', 'bosnia and herzegovina', 'israel', 'tree sow thistle', 'chickadee', 'bean', 'automatic data processing', 'stickweed', 'arcbest', 'russian', 'penguin', 'coast live oak', 'reynolds american', 'ims health holdings', 'telephone & data systems', 'siamese fighting fish', 'ingram micro', 'goose', 'targa resources', 'boyd gaming', 'genuine parts', 'johnson & johnson', 'white birch', 'sherwin-williams', 'quad/graphics', 'burlington stores', 'romanian', 'bactrian camel', 'time warner cable', 'dresser-rand group', 'evolution/revolution', 'amy root', 'annual sow thistle', 'devils nose', 'western sword fern', 'evergreen huckleberry', 'turkey', 'whale', 'iheartmedia', 'yellow ox eye daisy', 'lpl financial holdings', 'lesotho', 'paraguay', 'fairymoss azolla caroliniana', 'deciduous holly', 'peacock', 'integrys energy group', 'mercury general', 'swamp cabbage', 'prudential financial', 'eytelia', 'hellebore', 'ivy', 'baboon', 'rush enterprises', 'chiquita brands international', 'wound rocket', 'partnerships for the goals', 'scurvy grass', 'coca-cola enterprises', 'host hotels & resorts', 'aphid', 'werner enterprises', 'mountain mahogany', 'climate action', 'gibraltar', 'eucalyptus', 'bermuda cress', 'maple', 'aleris', 'ca', 'thin leaved coneflower', 'acuity brands', 'sunedison', "portuguese man o' war", 'poppy', 'magahi', 'finland', 'eqt', 'emcor group', 'sycamore', 'raytheon', 'parakeet', 'vietnamese', 'hain celestial group', 'gujarati', 'zebra finch', 'walgreens', 'bobolink', 'robin', 'owl', 'ray', 'arctic wolf', 'henry schein', 'sheep', 'vole', 'russia', 'texas instruments', 'simon property group', 'dynegy', 'saffron crocus', 'south africa', 'las vegas sands', 'blackbird', 'virginia virgins bower', 'armadillo', 'blue ash', 'keurig green mountain', 'iac/interactivecorp', 'turks and caicos islands', 'freddie mac', 'water boa', 'portugal', 'quality education', 'cow', 'polyone', 'laboratory corp. of america', 'gopher', 'cotton plant', 'urban outfitters', 'perch', 'shadbush', 'lion', 'carolina azolla', 'praying mantis', 'macau', 'curaçao', 'barnacle', 'trueblue', 'guam', 'regeneron pharmaceuticals', 'kangaroo mouse', 'food', 'green headed coneflower', 'frontier communications', 'abm industries', 'rexnord', 'caesars entertainment', 'brazil', 'j.m. smucker', 'broadleaf plantain', 'cayman islands', 'fancy rat', 'illinois tool works', 'dow chemical', 'svalbard', 'united refining', 'cutleaf maple', 'papua new guinea', 'silky cornel', "côte d'ivoire", 'cattle', 'wren', 'yrc worldwide', 'hungary', 'sessile oak', 'newmont mining', 'cambodia', 'red deadnettle', 'cockroach', 'taylor morrison home', 'tanzania', 'nasdaq omx group', 'airgas', 'entergy', 'albatross', 'vanuatu', 'safeway', 'textron', 'pc connection', 'yam dios corea', 'cart track plant', 'felonwood', 'radical weed', 'trw automotive holdings', 'steel dynamics', 'black cherry', 'scarlet oak', 'bank of america corp.', 'xcel energy', 'low rose', 'hyena', 'u.s. virgin islands', 'italy', 'united rentals', 'buzzard', 'tetra tech', 'guanaco', 'rose milkweed', 'beaver', 'ebay', 'marsh ragwort', 'wesco international', 'snowdrop', 'pathmaking', 'red osier', 'cardinal', 'alpaca', 'somalia', 'bandicoot', 'travelers cos.', 'reinsurance group of america', 'expedia', 'sugar maple', 'priceline group', 'noble energy', 'carrot weed', 'jamaica', 'takin', 'cooper-standard holdings', 'public storage', 'manatee', 'buckeye california buckeye', 'arizona sycamore', 'hexion', 'togo', 'state farm insurance cos.', 'great white shark', 'horsetail milkweed', 'american eagle outfitters', 'kannada', 'el salvador', 'french', 'fedex', 'hindi', 'mandarin', 'black raspberry', 'leggett & platt', 'lincoln electric holdings', 'charles schwab', 'water maple', 'mozambique', 'woodpecker', 'rwanda', 'centipede', 'mouse', 'nrg energy', 'brinker international', 'silver leaf maple', 'barbados', 'black birch', 'haiti', 'cook islands', 'caleres', 'niue', 'black hellebore', 'republic services', 'virgins bower', 'donkey', 'h.b. fuller', 'tailored brands', 'genworth financial', 'small flowered thistle', 'gayal', 'popular', 'roper technologies', 'aflac', 'prairie dog', 'transitions', 'parsnip', 'selective insurance group', 'toad', 'hanover insurance group', 'sycamore california', 'whorled milkweed', 'kraft foods group', 'dames gilli flower', 'iron mountain', 'polish', 'gallberry', 'jack in the bush', 'real estate', 'tree tobacco', 'xylem', 'nightingale', 'watsco', 'red mulberry', 'chestnut', 'tegna', 'walt disney', 'chimpanzee', 'boeing', 'chesapeake energy', 'ann', 'chad', 'fortune brands home & security', 'cicada', 'toll brothers', 'patterson-uti energy', 'chemtura', 'spanish', 'scana', 'pokeweed', 'screw bean mesquite', 'viacom', 'lambs cress', 'african rice', 'rent-a-center', 'honey mesquite', 'steelhead trout', 'fiserv', 'cat', 'gloriosa daisy', 'philip morris international', 'paccar', 'gorilla', 'egypt', 'belden', 'marwari', 'mgm resorts international', 'australia', 'hoverfly', 'kemper', 'life below water', 'ox', 'lettuce', 'jones financial', 'cephalopod', 'phillips 66', 'sunpower', 'jones lang lasalle', 'estonia', 'mite', 'scrub oak', 'golden jerusalem', 'crow', "roundy's", 'urial', 'canidae', 'epic2022', 'centene', 'american express', 'gabon', 'curtiss-wright', 'european weeping birch', 'tenet healthcare', 'meritage homes', 'aecom', 'hares thistle', 'wineberry', 'llama', 'leech', 'california bay', 'leopon', 'duck retten', 'valley oak', 'mutual of america life insurance', 'javanese', 'tansy', 'equifax', 'seychelles', 'wolverine world wide', 'feverfew', 'huntsman', 'gazelle', 'robert half international', 'brier', 'office depot', 'archrock', 'hamster', 'allstate', 'blue of the heavens', 'sustainable cities and communities', 'wheat', 'raspberry', 'kar auction services', 'williams-sonoma', 'guan', 'greek', 'goldenglow', 'swinies', 'kapstone paper & packaging', 'petty morel', 'apollo education group', 'bristol-myers squibb', 'emerson electric', 'no poverty', 'primoris services', 'precision castparts', 'earth gall', 'bow wood', 'pool', 'parexel international', 'hard thistle', 'peanut', 'progressive', 'vectren', 'french polynesia', 'fancy mouse', 'jack by the hedge', 'coneflower', 'telecommunication', 'massachusetts mutual life insurance', 'baxter international', 'bat', 'carrot', 'church & dwight', 'capital one financial', 'marmot', 'leatherleaf viburnum', 'jay', 'wild rose', 'bonaire, sint eustatius, and saba', 'oxford ragwort', 'avis budget group', 'omnicom group', 'maxim integrated products', 'basilisk', 'fennel', 'computer sciences', 'echidna', 'j.crew group', 'cummins', 'lear', 'belarusan', 'red panda', 'arrow electronics', 'cno financial group', 'eastern coneflower', 'rice', 'suntrust banks', 'cherry birch', 'damask violet', 'swordtail', 'tiger', 'maithili', 'moosewood', 'sudan', 'possum', 'dames violet', 'citrix systems', 'chicken', 'rock harlequin', 'ukraine', 'african leopard', 'w.w. grainger', 'st. jude medical', 'tiger shark', 'jacobs engineering group', 'kangaroo', 'winterberry holly', 'lebanon', 'keycorp', 'citigroup', 'time warner', 'wells fargo', 'securian financial group', 'brown daisy', 'canada', 'usaa', 'terex', 'lily leek', 'beaked whale', 'levi strauss', 'total system services', 'calatlantic group', 'monkey', 'uganda', 'koi', 'eli lilly', 'false boxwood', 'advance auto parts', 'cabbage', 'manpowergroup', 'hershey', 'toothwort', 'hp', 'gilli flower', 'nvr', 'bobcat', 'zambia', 'armstrong world industries', 'groupon', 'guyana', 'mastercard', 'sea slug', 'gilead sciences', 'vantiv', 'english bulls eye', 'amtrust financial services', 'thistle', 'fern leaf corydalis', 'alere', 'tapir', 'guineafowl', 'devon energy', 'dean foods', 'snap-on', 'kousa dogwood', 'tech data', 'edwards lifesciences', 'penske automotive group', 'yellow fume wort', 'polar bear', 'family dollar stores', 'canid', 'white hellebore', 'energy', 'united states', 'partridge', 'sempra energy', 'sneezewort yarrow', 'cablevision systems', 'american tower', 'whippet', 'water fern', 'campbell soup', 'sprague resources', 'unisys', 'swamp white oak', 'treehouse foods', 'dogtooth violet', 'swine thistle', 'health net', "land o'lakes", 'adobe systems', 'chevron', 'milk thistle', 'vanilla orchid', 'bur oak', 'broadleaf', 'american samoa', 'thai', 'isle of man cabbage', 'alliance one international', 'exelis', 'kb home', 'lithuania', 'owens & minor', 'birch', 'devils plague', 'edgewell personal care', 'camel', 'liberty mutual insurance group', 'dte energy', 'ngl energy partners', 'williams', 'lexmark international', 'quercitron', 'consol energy', 'climbing nightshade', 'ralph lauren', 'falkland islands (islas malvinas)', 'bearberry', 'ingles markets', 'appalachian tea', 'oneok', 'ash', 'group 1 automotive', 'rocket', 'japanese', 'english', 'chinese', 'pfizer', 'crown holdings', 'packaging corp. of america', 'transport', 'spider monkey', 'idex', 'saint kitts and nevis', 'sentry insurance group', 'dingo', 'insperity', 'knights of columbus', 'mackerel', 'markel', 'rantipole', 'iguana', 'sweet orange', 'caterpillar', 'cornel', 'burmese', 'ant', 'fluor', 'green plains', 'california sycamore', 'scale insect', 'plains gp holdings', 'canyon live oak', 'fmc technologies', 'ragweed', 'oshkosh', 'uzbek', 'pennsylvania blackberry', 'hovnanian enterprises', 'construction', 'ladybug', 'new york life insurance', 'avery dennison', 'biogen', 'common yarrow', 'first solar', 'yellow milkweed', 'travellers joy', 'itt', 'carmax', 'box', 'dupont', 'snake', 'tread softly', 'minnow', 'round leaf plantain', 'nvidia', 'dog', 'lorillard', 'guppy', 'first data', 'common milkweed', 'new zealand flax', 'xerox', 'coconut', 'vulcan materials', 'venezuela', 'bitter nightshade', 'colfax', 'buffalo', 'delta air lines', 'metlife', 'northrop grumman', 'swamp ash', 'pantry', 'dr pepper snapple group', 'good health and well-being', 'american financial group', 'kenya', 'pistachio', 'visa', 'lilac', 'moog', 'red weed', 'bristly ground berry', 'vornado realty trust', 'elephant seal', 'sysco', 'sweden', 'british virgin islands', 'scoke', 'extinguisher moss', 'rattlesnake', 'auto-owners insurance', 'dutch', 'h.j. heinz', 'goldfish', 'way bread', 'night scented gilli flower', 'vatican city', 'american family insurance group', 'humana', 'nationwide', 'graham holdings', 'keek', 'kinder morgan', 'quest diagnostics', 'navient', 'sweet birch', 'american axle & manufacturing', 'w.r. grace', 'wild cherry', 'ground shark', 'korean rock fern', 'supervalu', 'chrysanthemum', 'ash leaved maple', 'northern tier energy', 'ppl', 'ape', 'pacific dogwood', 'marsupial', 'trinidad and tobago', 'south georgia and south sandwich islands', 'guinea pig', 'e-commerce', 'transdigm group', 'monaco', 'marathi', 'epic2006', 'porcupine', 'celgene', 'alcoa', 'shark', 'wild garlic', 't. rowe price', 'epic2020', 'cane ash', 'take-two interactive software', 'ghana', 'ford motor', 'a. schulman', 'locust', 'earthworm', 'ragwort', 'canoe birch', 'cebuano', 'cdw', 'science applications international', 'crane fly', 'merck', 'coakum', 'sugarcane', 'poison ivy', 'praxair', 'striped maple', 'black nightshade', 'amphenol', 'kingfisher', 'amica mutual insurance', 'pinnacle foods', 'mosquito fern', 'evergreen winterberry', "kohl's", 'chipotle mexican grill', 'kiribati', 'way thistle', 'saint pierre and miquelon', 'timken', 'orangutan', 'giraffe', 'spartannash', 'buckeye partners', 'hub group', 'turkmenistan', 'bull nettle', 'harlequin', 'giant ragweed', 'black maple', 'rabbit', 'alphabet', 'hni', 'thrush', 'nortek', 'silkworm', 'star-nosed mole', 'pocan bush', 'rs legacy', 'bali cattle', 'american water works', 'buffalo weed', "mcdonald's", 'greater plantain', 'upland cress', 'pashto', 'hd supply holdings', 'omnicare', 'nustar energy', 'dsw', 'oriya', 'comerica', 'german', 'zimbabwe', 'boston properties', 'graybar electric', 'limpet', 'hhgregg', 'leopard', 'lemming', 'whitewave foods', 'envision healthcare holdings', 'mayotte', 'white maple', 'cintas', 'electronics', 'm&t bank corp.', 'insurance', 'wild pellitory', 'epic2021', 'woody nightshade', 'cherry', 'parrotfish', 'asp', 'heron', 'colic weed', 'deadly nightshade', 'occidental petroleum', 'tagalog', 'tree onion', 'central african republic', 'general electric', 'spotted deadnettle', 'centerpoint energy', 'dst systems', 'stancorp financial group', 'pigeon', 'oak tree quercus', 'liechtenstein', 'meadwestvaco', 'american dogwood', 'willbros group', 'goose tongue', 'timor-leste', 'dolphin', 'blackhaw', 'mueller industries', 'bonobo', 'sunflower', 'unitedhealth group', 'reduce inequality', 'at&t', 'international game technology', 'schnitzer steel industries', 'big hellebore', 'kelly services', 'african buffalo', 'general dynamics', 'warbler', 'fever bush', 'marriott international', 'daisy', 'aar', 'dindle', 'ch2m hill', 'devils bite', 'common ragweed', 'shad blow', 'waste connections', 'wormwood', 'fiji', 'alliance holdings', 'axiall', 'manitowoc', 'kousa', 'fig', 'nigeria', 'djibouti', 'harley-davidson', 'autonation', 'spring cress', 'xilinx', 'lennar', 'con-way', 'autodesk', 'gull', 'swaziland', 'yoruba', 'horse', 'grasshopper', 'hedge plant', 'protective life', 'fern leaf yarrow', 'lombard', 'swamp maple', 'rheumatism root', 'mdu resources group', 'red willow', 'bovid', 'pedunculate oak', 'aetna', 'netflix', 'malayalam', 'eastman kodak', 'wec energy group', 'white oak', 'bastard pellitory', 'pleurisy root', 'rogues gilli flower', 'panama', 'martinique', 'california thistle', 'general growth properties', 'uzbekistan', 'fox', 'maple ash', 'cooper tire & rubber', 'clam', 'chile', 'broadcom', 'monsanto', 'home depot', 'butterfly flower', 'otter', 'tickle weed', 'blackie head', 'weyerhaeuser', 'turtle', 'kangaroo rat', 'cougar', "dillard's", 'albania', 'hare', 'oman', 'felidae', 'bangladesh', 'haddock', 'cbs', 'snipe', 'osage', 'azolla', 'sanmina', 'dominion resources', 'capybara', 'western wake robin', 'chs', 'andersons', 'giant panda', 'regency energy partners', 'jellyfish', 'reunion', 'epic2009', 'kbr', "macy's", 'sears hometown & outlet stores', 'false alder', 'esterline technologies', 'azerbaijani', 'convergys', 'south korea', 'belize', 'stericycle', 'coty', 'halliburton', 'urdu', 'burundi', 'irukandji jellyfish', 'speedwell', 'resolute forest products', 'evidence', 'laos', 'crocodile', 'epic2015', 'deere', 'mule', 'interpublic group', 'marshall islands', 'swamp hellebore', 'lobster', 'alaska air group', 'range resources', 'cbre group', 'applied industrial technologies', 'soft maple', 'sonoco products', 'flowering dogwood', 'spiny leaved sow thistle', 'allegheny technologies', 'cliffs natural resources', 'teradata', 'westar energy', 'nexeo solutions holdings', 'tops holding', 'landfowl', 'portugese', 'iran', 'landstar system', 'scorpion', 'jersey', 'raymond james financial', 'meadow cabbage', 'deccan', 'lemur', 'union pacific', 'swallow', 'sunda', 'scotch cap', 'worthington industries', 'stoat', 'ups', "chico's fas", 'newt', 'nodding thistle', 'tree frog', 'nosebleed', 'concho resources', 'somali', 'swamp silkweed', 'yak', 'american equity investment life holding', 'clump foot cabbage', 'flea', 'cape buffalo', 'lungfish', 'berkshire hathaway', 'english oak', 'fidelity national information services', 'tesoro', 'saudi arabia', 'european holly', 'wombat', 'saint martin', 'swamp spanish oak', 'dragonfly', 'english pointer', 'kite', "wendy's", 'deer', 'three leaved coneflower', 'fidelity national financial', 'sindhi', 'sugar glider', 'healing blade', 'bulgarian', 'dye leaves', 'northwestern mutual', 'entertainment', 'gaza strip', 'water buffalo', 'public service enterprise group', 'united continental holdings', 'tractor supply', 'ihs', 'crane', 'rpm international', 'new caledonia', 'mohawk industries', 'a.o. smith', 'impala', 'bio-rad laboratories', 'tyson foods', 'essendant', 'rcs capital', 'herb barbara', 'grizzly bear', 'samoa', 'sailfish', 'new jersey resources', 'becton dickinson', 'isle of man', 'boston scientific', 'false hellebore', 'south sudan', 'panther', 'whitefish', 'cornelian tree', 'agriculture', 'silkweed', 'continental resources', 'mutual of omaha insurance', 'wild hops', 'molina healthcare', 'trailing red huckleberry', 'norfolk southern', 'montenegro', 'white indian hemp', 'regal entertainment group', 'tonga', 'planarian', 'medical mutual of ohio', 'spotted oak', 'garlic', 'tuvalu', 'weis markets', 'ascena retail group', 'hippopotamus', 'stingray', 'crab', 'whiskey cherry', 'lennox international', 'sneezewort', 'danaher', 'macedonia', 'platypus', 'summer lilac', 'general motors', 'salmon', 'greenland', 'sonic automotive', 'yellow perch', 'varian medical systems', 'san marino', 'switzerland', 'liberty interactive', 'mednax', 'iraq', 'european flax', 'chigger flower', 'western union', 'gordaldo', 'country financial', 'boxwood', 'welltower', 'germany', 'dames rocket', 'news corp.', 'box jellyfish', 'sparrow', 'sears holdings', 'hen plant', 'icahn enterprises', 'bermuda', 'universal forest products', 'td ameritrade holding', 'conagra foods', 'international flavors & fragrances', 'red ash', 'yum brands', 'epic2012', 'common plantain', 'philippines', 'redbud', 'hyster-yale materials handling', 'mexico', 'hca holdings', 'southwest gas', 'blueberry cornel', 'collard', 'epic2005', 'chinchilla', 'osier salix', 'peach', 'anteater', 'bengali', 'semgroup', 'mining', 'saraiki', 'lam research', 'italian', 'westinghouse air brake technologies', 'shrimp', 'towers watson', 'adt', 'serbo-croatian', 'wabco holdings', 'w.r. berkley', 'agl resources', 'cracker barrel old country store', 'navistar international', 'coca-cola', 'altria group', 'viper', 'antlion', 'westlake chemical', 'pall', 'u.s. bancorp', 'ameriprise financial', 'martin marietta materials', 'carpenter technology', 'kinnikinnik', 'newfield exploration', 'mesquite', 'cimarex energy', 'murphy oil', 'nextera energy', 'fumewort', 'cigna', 'star of persia', 'par pacific holdings', 'ametek', 'estee lauder', 'ukrainian', 'poorland daisy', 'guatemala', 'catfish', 'flax', 'liberty media', 'weeping birch', 'skink', 'motorola solutions', 'canada root', 'teledyne technologies', 'alexion pharmaceuticals', 'lithia motors', 'barnes & noble', 'atmos energy', 'judas tree', 'bulbous cress', 'henbit deadnettle', 'orange swallow wort', 'cameroon', 'hoary ragwort', 'jp morgan chase', 'universal health services', 'automotive', 'amgen', 'skunk cabbage', 'punjabi', 'swift transportation', 'kroger', 'costco', 'cabot', 'linn energy', 'bolivia', 'beacon roofing supply', 'butterfly', 'poison flower', 'sorrel', 'national fuel gas', 'edison international', 'eastern redbud', 'walrus', 'canada thistle', 'indian hemp', 'sword ferns', 'komodo dragon', 'multiflora rose', "peter kiewit sons'", 'aramark', 'scallop', 'farmers insurance exchange', 'viburnum', 'dominican republic', 'carp', 'reliance steel & aluminum', 'cork oak', 'universal', 'ferrellgas partners', 'post holdings', 'pepco holdings', 'firefly', 'moldova', 'austria', 'brocade communications systems', 'louse', 'lark', 'trillium', 'marlin', 'pink corydalis', 'bed bath & beyond', 'badger', 'amkor technology', 'spider', 'white cornel', 'panda', 'lambs foot', 'wolf', 'creeping yellow cress', 'pitcairn islands', 'river birch', 'autoliv', 'angola', 'wellcare health plans', 'steelcase', 'orange root', 'yellow coneflower', 'eversource energy', 'marina', 'duke energy', 'tiglon', 'clove', 'industry, innovation, and infrastructure', 'sundari bangladesh', 'agilent technologies', 'cvs health', 'regal beloit', 'scripps networks interactive', 'lab rat', 'starbucks', 'damselfly', 'perspectives', 'zions bancorp.', 'boston fern or sword fern', 'sockeye salmon', 'syria', 'valspar', 'big heart pet brands', 'iceland', 'ugi', 'island oak','spotify']

def get_categories(txt):
  my_words=set()
  for i in range(5):
    my_words = my_words.union(generate_N_grams(txt,i+1))
  ans = []
  print(my_words)
  for x in my_words:
    if(len(x)>0 and x[0]=='#' and len(x.split())==1):
      ans.append(x.capitalize())
    if(x.lower() in ms):
      ans.append(x.capitalize())

  return list(np.unique(ans))

def extractor5(text):
  ans=[]

  anss = kbir_model(text)
  for x in anss:
    ans.append(x)

  # try:
  #   anss = kbir_model(text)
  #   for x in anss:
  #     ans.append(x)
  # except:
  #   print("Error on KBIR Model")



    # initialize keyphrase extraction model, here TopicRank
  extractor = pke.unsupervised.TopicRank()

  # load the content of the document, here document is expected to be a simple
  # test string and preprocessing is carried out using spacy
  extractor.load_document(input=text, language='en')

  # keyphrase candidate selection, in the case of TopicRank: sequences of nouns
  # and adjectives (i.e. `(Noun|Adj)*`)
  extractor.candidate_selection()

  # candidate weighting, in the case of TopicRank: using a random walk algorithm
  extractor.candidate_weighting()

  # N-best selection, keyphrases contains the 10 highest scored candidates as
  # (keyphrase, score) tuples
  keyphrases = extractor.get_n_best(n=10)

  for (x1,x2) in keyphrases:
    ans.append(x1.capitalize())

  kw_model = KeyBERT(model='all-mpnet-base-v2')
  keywords = kw_model.extract_keywords(text,keyphrase_ngram_range=(1, 1), stop_words='english')
  for x in keywords:
    ans.append(x[0].capitalize())

  module_url = "https://tfhub.dev/google/universal-sentence-encoder/4"
  model = hub.load(module_url)
  ans = remove_similar_words(ans,model)

  chk_set = get_words(text)
  ans1 = []
  for x in ans:
    flag=1
    for z in x.lower().split():
      if z not in chk_set:
        flag=0
        break
    if flag:
      ans1.append(x.capitalize())

  ans2 = get_categories(text)
  ans3 = ans1 + ans2
  fans = remove_similar_words(ans3,model)


  # random.shuffle(ans1)
  # if len(ans1)>15:
  #   ans1 = ans1[0:15]
  return fans
